# 要件定義書：CSV売上計算ソフト

## 1. 概要

本ソフトウェアは、Web UI上でアップロードされたレンタル受付情報CSVファイルを解析し、決済ツールごとの売上金額を集計・計算することを目的とする。

## 2. 機能要件

### 2.1. CSVファイルのアップロード・解析機能
-   ユーザーはWeb UI上の専用ボタンからCSVファイルをアップロードできる。
-   文字コードはUTF-8として読み込む。
-   CSVファイルのフォーマットは`sample.csv`に準拠するものとする。
    -   **必須列:** `金額`, `決済方法`, `決済ツール名`
    -   **区切り文字:** カンマ (,)
    -   **ヘッダー行:** 1行目にヘッダーが存在する。

### 2.2. 売上計算機能
-   各行の`金額`を`決済ツール名`ごとに合計し、売上を算出する。
-   `決済方法`が「カード払い」の場合、`決済ツール名`を「事前カード」として扱う。

### 2.3. 結果表示機能
-   計算結果をWeb UI上のテーブルに表示する。
-   表示する情報は以下の通りとする。
    -   決済ツール名
    -   合計売上金額
-   （任意）計算結果をCSVファイルとして出力する機能。

## 3. 非機能要件

### 3.1. パフォーマンス
-   10,000行程度のCSVファイルを10秒以内に処理できること。

### 3.2. ユーザビリティ
-   コマンドラインインターフェース（CLI）またはシンプルなWeb UIを通じて、直感的に操作できること。

### 3.3. エラーハンドリング
-   CSVの必須列（`金額`, `決済方法`, `決済ツール名`）が存在しない場合、エラーメッセージを表示すること。
-   売上計算に必要な列（`金額`）のデータが数値に変換できない場合、その行はスキップし、エラーログを出力すること。

## 4. 開発環境・技術スタック

-   **言語:**
-   **フレームワーク/ライブラリ:**
-   **実行環境:**

## 5. 画面・UI要件（Web UIの場合）

-   ファイルアップロード用のボタンを設置する。
-   計算結果を表示するためのテーブル（表）を設ける。

## 6. その他

-   （ここにその他制約事項や前提条件を記載）

   1. 楽天決済方法のグルーピング:
       * アプリ決済: R Pay, AU Pay
       * タッチ決済: ID, R Edy, QUIC Pay,
         交通系, NANACO
       * クレジットカード: Credit Card
  
  
決済ツールが不明の場合は、決済ツールが何であったのかを精査する必要があります。